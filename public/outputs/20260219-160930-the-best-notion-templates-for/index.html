<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="" />
  <meta name="keywords" content="Digital, Product, digital product, passive income, MetaPassiveIncome" />
  <meta property="og:title" content="MetaPassiveIncome | Digital Product" />
  <meta property="og:description" content="" />
  <meta property="og:image" content="https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=2000&auto=format&fit=crop" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="MetaPassiveIncome" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="MetaPassiveIncome | Digital Product" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:image" content="https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=2000&auto=format&fit=crop" />
  <meta name="robots" content="index, follow" />
  <link rel="canonical" href="https://meta-passive-income-product.vercel.app" />
  
  <script type="application/ld+json">
  {
    "@context": "https://schema.org/",
    "@type": "Product",
    "name": "Digital Product",
    "description": "",
    "brand": {
      "@type": "Brand",
      "name": "MetaPassiveIncome"
    },
    "offers": {
      "@type": "Offer",
      "priceCurrency": "USD",
      "price": "19.00",
      "availability": "https://schema.org/InStock"
    }
  }
  </script>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 fill=%22%2300b4ff%22></rect></svg>">
  <title>MetaPassiveIncome | Digital Product</title>

  <style>
    :root {
      --bg: #070b12;
      --panel: rgba(255,255,255,0.06);
      --panel2: rgba(255,255,255,0.08);
      --text: rgba(255,255,255,0.92);
      --muted: rgba(255,255,255,0.68);
      --line: rgba(255,255,255,0.12);
      --glow: #00b4ff55;
      --accent: #00b4ff;
      --accent2: #22d3ee;
      --danger: #ff4d6d;
      --ok: #2ee59d;
      --radius: 16px;
      --font-main: Inter, system-ui, sans-serif;
    }

    /* Urgency & Social Proof Styles */
    .urgency-bar {
      background: var(--danger);
      color: white;
      text-align: center;
      padding: 8px;
      font-size: 13px;
      font-weight: 700;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .notification-popup {
      position: fixed;
      bottom: 20px;
      left: 20px;
      background: var(--panel);
      border: 1px solid var(--line);
      padding: 12px 18px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      gap: 12px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      z-index: 1000;
      transform: translateY(150%);
      transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .notification-popup.show {
      transform: translateY(0);
    }

    body.theme-course {
      --bg: #0b0814;
      --accent: #00b4ff;
      --accent2: #22d3ee;
      --glow: #00b4ff33;
    }

    body.theme-elegant {
      --bg: #0f172a;
      --accent: #00b4ff;
      --accent2: #22d3ee;
      --glow: #00b4ff25;
      --radius: 4px;
    }

    body.theme-minimal {
      --bg: #ffffff;
      --text: #1e293b;
      --muted: #64748b;
      --line: #e2e8f0;
      --panel: #f8fafc;
      --panel2: #f1f5f9;
      --accent: #00b4ff;
      --accent2: #22d3ee;
      --glow: #00b4ff1a;
    }

    body.theme-playful {
      --bg: #fdf2f8;
      --text: #831843;
      --muted: #be185d;
      --line: #fbcfe8;
      --panel: #ffffff;
      --panel2: #fce7f3;
      --accent: #00b4ff;
      --accent2: #22d3ee;
      --glow: #00b4ff20;
      --radius: 24px;
    }

    body.theme-dashboard {
      --bg: #020617;
      --accent: #00b4ff;
      --accent2: #22d3ee;
      --glow: #00b4ff32;
    }

    body.theme-landing {
      --bg: #020617;
      --accent: #00b4ff;
      --accent2: #22d3ee;
      --glow: #00b4ff32;
    }

    body.theme-saas {
      --bg: #020617;
      --accent: #00b4ff;
      --accent2: #22d3ee;
      --glow: #00b4ff32;
    }

    body.theme-tool {
      --bg: #020617;
      --accent: #00b4ff;
      --accent2: #22d3ee;
      --glow: #00b4ff34;
    }

    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      background: radial-gradient(1200px 800px at 70% 20%, #00b4ff1a, transparent 55%),
                  radial-gradient(900px 600px at 25% 30%, #22d3ee14, transparent 55%),
                  var(--bg);
      color: var(--text);
      font-family: var(--font-main);
      line-height: 1.5;
      scroll-behavior: smooth;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    .container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 24px;
    }

    /* Layout Styles */
    .layout-grid .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 24px;
    }

    .layout-creative .hero {
      text-align: left;
      display: flex;
      align-items: center;
      gap: 40px;
    }

    .layout-creative .hero-content {
      flex: 1;
    }

    .layout-corporate .container {
      max-width: 900px;
    }

    .layout-minimalist .hero {
      padding: 120px 24px;
    }

    .nav {
      position: sticky;
      top: 0;
      z-index: 50;
      backdrop-filter: blur(10px);
      background: linear-gradient(to bottom, rgba(7,11,18,0.88), rgba(7,11,18,0.55));
      border-bottom: 1px solid var(--line);
    }

    .nav-inner {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      padding: 14px 24px;
      max-width: 1100px;
      margin: 0 auto;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 800;
      letter-spacing: 0.2px;
    }

    .logo {
      width: 34px;
      height: 34px;
      border-radius: 12px;
      background: radial-gradient(circle at 30% 30%, rgba(34,211,238,0.9), rgba(0,180,255,0.3)),
                  rgba(255,255,255,0.06);
      box-shadow: 0 0 30px var(--glow);
      border: 1px solid rgba(255,255,255,0.16);
    }

    .nav-links {
      display: flex;
      align-items: center;
      gap: 16px;
      font-size: 14px;
      color: var(--muted);
    }

    .nav-links a {
      padding: 8px 10px;
      border-radius: 10px;
    }

    .nav-links a:hover {
      background: rgba(255,255,255,0.06);
      color: var(--text);
    }

    .nav-actions {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .btn {
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(255,255,255,0.06);
      color: var(--text);
      padding: 10px 14px;
      border-radius: 12px;
      cursor: pointer;
      font-weight: 700;
      font-size: 14px;
      transition: transform 0.05s ease, background 0.2s ease, border 0.2s ease;
      user-select: none;
    }

    .btn:hover {
      background: rgba(255,255,255,0.10);
      border-color: rgba(255,255,255,0.26);
    }

    .btn:active {
      transform: translateY(1px);
    }

    .btn-primary {
      background: linear-gradient(135deg, rgba(0,180,255,0.95), rgba(34,211,238,0.85));
      border: 0;
      color: #001018;
      box-shadow: 0 12px 30px rgba(0,180,255,0.22);
    }

    .hero {
      padding: 64px 0 10px 0;
    }

    .hero-grid {
      display: grid;
      grid-template-columns: 1.2fr 0.8fr;
      gap: 28px;
      align-items: center;
    }

    @media (max-width: 920px) {
      .hero-grid {
        grid-template-columns: 1fr;
      }
    }

    .hero-preview {
      position: relative;
    }

    .hero-image {
      width: 100%;
      border-radius: 18px;
      border: 1px solid var(--line);
      box-shadow: 0 32px 64px rgba(0,0,0,0.4);
      background: rgba(255,255,255,0.02);
      aspect-ratio: 16 / 10;
      object-fit: cover;
    }

    .kicker {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 8px 12px;
      border: 1px solid var(--line);
      border-radius: 999px;
      color: var(--muted);
      background: rgba(255,255,255,0.04);
      font-size: 13px;
    }

    .kicker-dot {
      width: 8px;
      height: 8px;
      border-radius: 99px;
      background: var(--accent2);
      box-shadow: 0 0 16px rgba(34,211,238,0.45);
    }

    h1 {
      margin: 16px 0 10px 0;
      font-size: 46px;
      line-height: 1.08;
      letter-spacing: -0.6px;
    }

    @media (max-width: 520px) {
      h1 {
        font-size: 36px;
      }
    }

    .sub {
      margin: 0;
      color: var(--muted);
      font-size: 16px;
      max-width: 60ch;
    }

    .hero-actions {
      margin-top: 22px;
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    .panel {
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
      border: 1px solid var(--line);
      border-radius: var(--radius);
      padding: 18px;
      box-shadow: 0 24px 60px rgba(0,0,0,0.35);
    }

    .panel h3 {
      margin: 0 0 10px 0;
      font-size: 16px;
    }

    .panel p {
      margin: 0;
      color: var(--muted);
      font-size: 14px;
    }

    .stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin-top: 14px;
    }

    .stat {
      padding: 12px;
      border-radius: 14px;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.10);
    }

    .stat strong {
      display: block;
      font-size: 15px;
    }

    .stat span {
      display: block;
      font-size: 12px;
      color: var(--muted);
      margin-top: 4px;
    }

    section {
      padding: 36px 0;
    }

    .section-title {
      font-size: 22px;
      margin: 0 0 12px 0;
      letter-spacing: -0.2px;
    }

    .grid3 {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 14px;
    }

    @media (max-width: 920px) {
      .grid3 {
        grid-template-columns: 1fr;
      }
    }

    .card {
      padding: 16px;
      border-radius: var(--radius);
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.05);
    }

    .card h4 {
      margin: 0 0 8px 0;
      font-size: 15px;
    }

    .card p {
      margin: 0;
      color: var(--muted);
      font-size: 13px;
    }

    .pricing {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 14px;
    }

    .pricing-card {
      background: rgba(255,255,255,0.03);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 16px;
      padding: 24px;
      display: flex;
      flex-direction: column;
      transition: transform 0.2s ease, border-color 0.2s ease;
    }

    .pricing-card:hover {
      transform: translateY(-4px);
      border-color: var(--accent);
      background: rgba(255,255,255,0.05);
    }

    .pricing-card h3 {
      margin: 0;
      font-size: 18px;
    }

    .pricing-card .price {
      font-size: 36px;
      font-weight: 800;
      margin: 16px 0;
      color: var(--text);
    }

    .pricing-card .price span {
      font-size: 14px;
      color: var(--muted);
      font-weight: 400;
    }

    .pricing-card .features {
      list-style: none;
      padding: 0;
      margin: 0 0 24px 0;
      flex-grow: 1;
    }

    .pricing-card .features li {
      padding: 8px 0;
      color: var(--muted);
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .pricing-card .features li::before {
      content: "âœ“";
      color: var(--accent);
      font-weight: bold;
    }

    @media (max-width: 920px) {
      .pricing {
        grid-template-columns: 1fr;
      }
    }

    .price {
      font-size: 28px;
      margin: 10px 0 8px 0;
      letter-spacing: -0.4px;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 12px;
      color: rgba(255,255,255,0.75);
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.04);
    }

    .badge .pill {
      width: 8px;
      height: 8px;
      border-radius: 99px;
      background: var(--ok);
      box-shadow: 0 0 18px rgba(46,229,157,0.35);
    }

    .list {
      margin: 10px 0 0 0;
      padding: 0;
      list-style: none;
      color: var(--muted);
      font-size: 13px;
    }

    .list li {
      padding: 6px 0;
      border-top: 1px dashed rgba(255,255,255,0.12);
    }

    .faq {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
    }

    @media (max-width: 920px) {
      .faq {
        grid-template-columns: 1fr;
      }
    }

    footer {
      padding: 28px 0 46px 0;
      color: var(--muted);
      border-top: 1px solid var(--line);
      margin-top: 26px;
      font-size: 13px;
    }

    /* ëª¨ë‹¬ */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.62);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 18px;
      z-index: 200;
    }

    .modal {
      width: min(560px, 100%);
      background: rgba(10,14,22,0.92);
      border: 1px solid rgba(255,255,255,0.14);
      border-radius: 18px;
      box-shadow: 0 30px 90px rgba(0,0,0,0.55);
      padding: 16px;
    }

    .modal-head {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 10px;
    }

    .modal-title {
      margin: 0;
      font-size: 16px;
      letter-spacing: -0.2px;
    }

    .x {
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.06);
      color: var(--text);
      border-radius: 12px;
      padding: 8px 10px;
      cursor: pointer;
      font-weight: 800;
    }

    .field {
      margin-top: 10px;
    }

    .label {
      display: block;
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 6px;
    }

    .input {
      width: 100%;
      padding: 12px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.05);
      color: var(--text);
      outline: none;
    }

    .hint {
      margin-top: 8px;
      font-size: 12px;
      color: rgba(255,255,255,0.62);
    }

    .row {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 12px;
    }

    .toast {
      position: fixed;
      right: 14px;
      bottom: 14px;
      background: rgba(10,14,22,0.92);
      border: 1px solid rgba(255,255,255,0.14);
      padding: 10px 12px;
      border-radius: 14px;
      color: var(--text);
      display: none;
      z-index: 999;
      max-width: 360px;
      box-shadow: 0 24px 80px rgba(0,0,0,0.5);
      font-size: 13px;
    }
  </style>
</head>

<body data-product-id="product" class="theme-default layout-minimalist">
  <div class="urgency-bar">
    LIMITED TIME OFFER: Save 50% for the next <span id="countdown">15:00</span>
  </div>
  <div class="nav">
    <div class="nav-inner">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>MetaPassiveIncome</div>
      </div>

      <div class="nav-links" aria-label="Primary">
        <a href="#features" data-action="nav" data-target="#features">Features</a>
        <a href="#pricing" data-action="nav" data-target="#pricing">Pricing</a>
        <a href="#faq" data-action="nav" data-target="#faq">FAQ</a>
      </div>

      <div class="nav-actions">
        <button class="btn" data-action="open-login">Sign In</button>
        <button class="btn btn-primary" data-action="open-plans">Get Started</button>
      </div>
    </div>
  </div>

  <main class="container">
    <div class="hero">
      <div class="hero-grid">
        <div>
          <div class="kicker">
            <span class="kicker-dot"></span>
            <span>Web3-ready SaaS landing â€¢ Professional Template</span>
          </div>
          <h1>Digital Product</h1>
          <p class="sub"></p>

          <div class="hero-actions">
            <button class="btn btn-primary" data-action="open-plans" style="padding: 14px 24px; font-size: 16px;">Get Started</button>
            <button class="btn" data-action="scroll" data-target="#features" style="padding: 14px 24px; font-size: 16px;">Learn More</button>
          </div>
        </div>
        <div class="hero-preview">
          <img src="https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=2000&auto=format&fit=crop" alt="Product Preview" class="hero-image" loading="lazy" />
        </div>
      </div>
    </div>

    <section id="features">
      <h2 class="section-title">Features</h2>
      <div class="grid3">
        
        <div class="card"><h4>Wallet-ready checkout</h4><p>Designed for crypto-wallet users. Next step: invoice creation + webhook â†’ fulfillment.</p></div>
        <div class="card"><h4>One-file deploy</h4><p>No build step required. Works on Vercel static hosting. No missing JS bundles.</p></div>
        <div class="card"><h4>Action router</h4><p>All buttons use <code>data-action</code>. Easy to extend with payment + download gating.</p></div>
        
      </div>
    </section>

    <section id="pricing">
      <h2 class="section-title">Pricing</h2>
      <div class="pricing">
        <div class="card" style="border-color: rgba(0,180,255,0.38); box-shadow: 0 24px 80px rgba(0,180,255,0.12);"><div class="badge"><span class="pill" style="background: var(--accent2);"></span><span>Standard</span></div><div class="price">$25.00<span style="font-size:14px; color: var(--muted);">/mo</span></div><p class="sub" style="font-size:13px;">Best for most creators.</p><ul class="list"><li>Full access</li><li>Priority support</li><li>Updates included</li></ul><div class="row"><button class="btn btn-primary" data-action="choose-plan" data-plan="Standard" data-price="$25.00">Standard</button></div></div>
      </div>
    </section>

    <section id="faq">
      <h2 class="section-title">FAQ</h2>
      <div class="faq">
        
        <div class="card"><h4>Why are buttons sometimes unresponsive?</h4><p>If the HTML file is wrapped in markdown fences or served escaped, the DOM differs and scripts may not run as expected.</p></div>
        <div class="card"><h4>Where does payment integration go?</h4><p>Next module: serverless function (Vercel) â†’ create invoice â†’ receive webhook â†’ unlock download/email.</p></div>
        
      </div>
    </section>

    <footer>
      <div style="margin-top:6px;">Â© MetaPassiveIncome. All rights reserved.</div>
    </footer>
  </main>

  <div class="notification-popup" id="purchase-notification">
    <div style="font-size: 20px;">ğŸ”¥</div>
    <div>
      <div style="font-weight: 700; font-size: 14px;" id="notif-name">Someone from USA</div>
      <div style="font-size: 12px; color: var(--muted);">just purchased this product</div>
    </div>
  </div>

  <!-- Login Modal -->
  <div class="modal-backdrop" id="modal-login" role="dialog" aria-modal="true" aria-label="Login modal">
    <div class="modal">
      <div class="modal-head">
        <h3 class="modal-title">Sign In</h3>
        <button class="x" data-action="close-modal" data-target="#modal-login">X</button>
      </div>

      <div class="field">
        <label class="label">Email</label>
        <input class="input" id="login-email" placeholder="you@example.com" />
      </div>

      <div class="field">
        <label class="label">Password</label>
        <input class="input" id="login-pass" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" />
      </div>

      <div class="row">
        <button class="btn btn-primary" data-action="do-login">Sign In</button>
        <button class="btn" data-action="close-modal" data-target="#modal-login">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Plans Modal -->
  <div class="modal-backdrop" id="modal-plans" role="dialog" aria-modal="true" aria-label="Plans modal">
    <div class="modal">
      <div class="modal-head">
        <h3 class="modal-title">Get Started</h3>
        <button class="x" data-action="close-modal" data-target="#modal-plans">X</button>
      </div>

      <p style="margin: 0; color: var(--muted); font-size: 13px;">
        Choose a plan, enter your email, and we'll "capture a lead". Payment step will replace this later.
      </p>

      <div class="field">
        <label class="label">Email</label>
        <input class="input" id="lead-email" placeholder="lead@example.com" />
      </div>

      <div class="field">
        <label class="label">Selected Plan</label>
        <input class="input" id="lead-plan" placeholder="(select below)" readonly />
      </div>

      <div class="row" id="plan-buttons">
        <!-- Dynamic buttons injected by JS -->
      </div>

      <div class="row">
        <button class="btn btn-primary" data-action="submit-lead">Continue</button>
        <button class="btn" data-action="check-payment">I already paid</button>
        <button class="btn" data-action="close-modal" data-target="#modal-plans">Close</button>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast"></div>

  <script>
    (function() {
      "use strict";

      // 404 Error Suppressor for Vite/Client, Favicon, and Source Maps in previews
      (function() {
        var originalError = console.error;
        var originalWarn = console.warn;
        
        console.error = function() {
          var msg = arguments[0];
          if (msg && typeof msg === 'string') {
            if (msg.indexOf('/@vite/client') !== -1 || 
                msg.indexOf('Failed to load resource') !== -1 ||
                msg.indexOf('favicon.ico') !== -1 ||
                msg.indexOf('.map') !== -1) {
              return;
            }
          }
          originalError.apply(console, arguments);
        };

        console.warn = function() {
          var msg = arguments[0];
          if (msg && typeof msg === 'string') {
            if (msg.indexOf('SourceMap') !== -1 || msg.indexOf('.map') !== -1) {
              return;
            }
          }
          originalWarn.apply(console, arguments);
        };
      })();

      // ----- ì‘ì€ ìœ í‹¸ -----
      function qs(sel) { return document.querySelector(sel); }
      function qsa(sel) { return Array.from(document.querySelectorAll(sel)); }

      function isLocalPreview() {
        try {
          var h = window.location.hostname || "";
          var p = String(window.location.port || "");
          var prot = window.location.protocol || "";
          // 8090/8088(preview), 8099(dashboard) ëª¨ë‘ ë¡œì»¬ë¡œ ê°„ì£¼
          if (p === "8099" || p === "8090" || p === "8088" || h === "127.0.0.1" || h === "localhost" || prot === "file:") {
              return true;
          }
          return false;
        } catch (e) {
          return false;
        }
      }

      // í”„ë¦¬ë·°(8090 ë“±)ì—ì„œëŠ” ë¡œì»¬ payment_server(5000) ì‚¬ìš©
      var API_BASE = "http://127.0.0.1:5000";
      try {
        var h = window.location.hostname;
        // ë¡œì»¬ í™˜ê²½ì´ ì•„ë‹Œ ê²½ìš°(ë°°í¬ í™˜ê²½)ì—ëŠ” ìƒëŒ€ ê²½ë¡œ ì‚¬ìš©
        if (h !== "127.0.0.1" && h !== "localhost" && window.location.protocol !== "file:") {
           API_BASE = ""; 
        }
      } catch (e) {}

      // ê°€ê²© ë™ì  ìƒì„± (í•˜ë“œì½”ë”© ì œê±°)
      try {
        var planBtns = document.getElementById("plan-buttons");
        if (planBtns) {
            // ìŠ¤í‚¤ë§ˆì—ì„œ ì£¼ì…ëœ ê°€ê²© ì •ë³´ ì‚¬ìš© (localStorage ë¬´ì‹œ)
            planBtns.innerHTML = `
                <button class="btn btn-primary" data-action="choose-plan" data-plan="Standard" data-price="$25.00">
                    Standard License ($25.00)
                </button>
            `;
        }
      } catch(e) {}

      function showToast(msg) {
        var t = qs("#toast");
        if (!t) return;
        t.textContent = msg;
        t.style.display = "block";
        clearTimeout(window.__toastTimer);
        window.__toastTimer = setTimeout(function() {
          t.style.display = "none";
        }, 2200);
      }

      function openModal(id) {
        var el = qs(id);
        if (!el) return;
        el.style.display = "flex";
      }

      function closeModal(id) {
        var el = qs(id);
        if (!el) return;
        el.style.display = "none";
      }

      function scrollToTarget(hash) {
        try {
          var el = qs(hash);
          if (el) {
            el.scrollIntoView({ behavior: "smooth", block: "start" });
          }
        } catch (e) {}
      }

      // ----- Marketing Urgency & Social Proof -----
      function startCountdown(durationSec) {
        var timer = durationSec, minutes, seconds;
        var el = qs("#countdown");
        if (!el) return;
        setInterval(function () {
          minutes = parseInt(timer / 60, 10);
          seconds = parseInt(timer % 60, 10);
          minutes = minutes < 10 ? "0" + minutes : minutes;
          seconds = seconds < 10 ? "0" + seconds : seconds;
          el.textContent = minutes + ":" + seconds;
          if (--timer < 0) timer = durationSec;
        }, 1000);
      }

      function startSocialProof() {
        var names = ["Alex", "Sarah", "Michael", "Elena", "Ji-hoon", "Chloe", "David", "Yuki"];
        var locations = ["USA", "UK", "Germany", "South Korea", "Japan", "Canada", "Singapore"];
        var notif = qs("#purchase-notification");
        var nameEl = qs("#notif-name");
        if (!notif || !nameEl) return;

        function showNotif() {
          var name = names[Math.floor(Math.random() * names.length)];
          var loc = locations[Math.floor(Math.random() * locations.length)];
          nameEl.textContent = name + " from " + loc;
          notif.classList.add("show");
          setTimeout(function() {
            notif.classList.remove("show");
          }, 5000);
        }

        setInterval(showNotif, 20000 + Math.random() * 20000);
        setTimeout(showNotif, 3000);
      }

      // Init Marketing
      startCountdown(15 * 60);
      startSocialProof();

      // ----- ë¡œì»¬ ì €ì¥ (ë°ëª¨) -----
      var productId = document.body.getAttribute("data-product-id") || "product";
      var KEY_LEADS = productId + ":leads";
      var KEY_PLAN  = productId + ":plan";
      var KEY_PRICE = productId + ":price";
      var KEY_ORDER = productId + ":order";
      var KEY_AUTH  = productId + ":auth";

      function readJson(key, fallback) {
        try {
          var v = localStorage.getItem(key);
          if (!v) return fallback;
          return JSON.parse(v);
        } catch (e) {
          return fallback;
        }
      }

      function writeJson(key, obj) {
        localStorage.setItem(key, JSON.stringify(obj));
      }

      // ----- ë¡œì§ ìœ í‹¸ -----
      );

          var data = await res.json().catch(function() { return {}; });
          if (!res.ok) {
            if (data.can_request) {
              alert(data.message || "Product needs regeneration. Please leave a comment on the WordPress post!");
            } else {
              showToast("Payment failed: " + (data.error || res.status));
            }
            return;
          }

          if (data.order_id) {
            localStorage.setItem(KEY_ORDER, String(data.order_id));
          }

          // 2) ì‹¤ì œ ê²°ì œì°½(NowPayments) ì „í™˜
          if (data.nowpayments && data.nowpayments.invoice_url) {
            showToast("Redirecting to payment gateway...");
            setTimeout(function() {
              window.location.href = data.nowpayments.invoice_url;
            }, 1000);
          } 
          // 3) Mock ëª¨ë“œì¸ ê²½ìš°ì—ë„ ì¦‰ì‹œ ë‹¤ìš´ë¡œë“œ ëŒ€ì‹  'ê²°ì œ ì§„í–‰ ì¤‘' ëŠë‚Œì„ ì£¼ê¸° ìœ„í•´ ëª¨ë‹¬ì´ë‚˜ ì§€ì—° ì²˜ë¦¬
          else if (data.status === "paid") {
            showToast("Success! Processing your order...");
            setTimeout(function() {
              var url = data.download_url;
              if (API_BASE && url && url.indexOf("http") !== 0 && url[0] === "/") {
                url = API_BASE + url;
              }
              // ë¡œì»¬ ë¯¸ë¦¬ë³´ê¸°(8090/8099) í™˜ê²½ì´ê³  URLì´ /api/pay/downloadë¡œ ì‹œì‘í•˜ë©´ dashboardì˜ í”„ë¡ì‹œë¥¼ í†µí•˜ë„ë¡ ìœ ë„
               if (false && isLocalPreview() && url && url.indexOf("/api/pay/download") !== -1) {
                 var currentPort = window.location.port;
                 if (currentPort === "8090" || currentPort === "8099") {
                   url = (url || "").replace("127.0.0.1:5000", window.location.host);
                 }
               }
               window.location.href = url || ("/downloads/" + productId + "/package.zip");
            }, 2000); // 2ì´ˆ ì •ë„ 'ì§€ì—°'ì„ ì£¼ì–´ ê²°ì œëœ ëŠë‚Œì„ ì¤Œ
          } else {
            showToast("Order created: " + (data.order_id || "pending"));
          }
        } catch (e) {
          showToast("Error: " + (e.message || String(e)));
        }
      }

      async function checkPay() {
        var orderId = localStorage.getItem(KEY_ORDER) || "";
        if (!orderId) {
          showToast("No recent payment to check. Start checkout first.");
          return;
        }
        showToast("Checking payment status...");
        try {
          var url = API_BASE + "/api/pay/check?order_id=" + encodeURIComponent(orderId) + "&product_id=" + encodeURIComponent(productId);
          var res = await fetch(url, { method: "GET" });
          var data = await res.json().catch(function() { return {}; });
          if (!res.ok) {
            showToast("Check failed: " + (data.error || res.status));
            return;
          }
          if (data.status === "paid" && data.download_url) {
            showToast("Payment confirmed. Redirecting to download...");
            setTimeout(function() {
              var url = data.download_url;
              if (API_BASE && url && url.indexOf("http") !== 0 && url[0] === "/") {
                url = API_BASE + url;
              }
              // ë¡œì»¬ ë¯¸ë¦¬ë³´ê¸°(8090/8099) í™˜ê²½ì´ê³  URLì´ /api/pay/downloadë¡œ ì‹œì‘í•˜ë©´ dashboardì˜ í”„ë¡ì‹œë¥¼ í†µí•˜ë„ë¡ ìœ ë„
              if (isLocalPreview() && url && url.indexOf("/api/pay/download") !== -1) {
                // dashboard_server.py(8099)ê°€ í”„ë¡ì‹œ ë¼ìš°íŠ¸ë¥¼ ê°€ì§€ê³  ìˆìœ¼ë¯€ë¡œ í˜¸ìŠ¤íŠ¸ë¥¼ ë³€ê²½
                var currentPort = window.location.port;
                if (currentPort === "8099") {
                  url = (url || "").replace("127.0.0.1:5000", window.location.host);
                }
              }
              window.location.href = url;
            }, 800);
          } else {
            showToast("Payment not confirmed yet. Status: " + (data.status || "pending"));
          }
        } catch (e) {
          showToast("Error: " + (e.message || String(e)));
        }
      }

      // ----- ì•¡ì…˜ ë¼ìš°í„° -----
      var actions = {
        "nav": function(el) {
          var target = el.getAttribute("data-target") || el.getAttribute("href") || "#features";
          if (target.startsWith("#")) {
            scrollToTarget(target);
          }
        },

        "scroll": function(el) {
          var target = el.getAttribute("data-target") || "#features";
          if (target.startsWith("#")) {
            scrollToTarget(target);
          }
        },

        "open-login": function() {
          openModal("#modal-login");
          setTimeout(function() {
            var inp = qs("#login-email");
            if (inp) inp.focus();
          }, 50);
        },

        "open-plans": function() {
          var plan = localStorage.getItem(KEY_PLAN) || "Premium";
          startPay(plan);
        },

        "close-modal": function(el) {
          var target = el.getAttribute("data-target");
          if (target) closeModal(target);
        },

        "choose-plan": function(el) {
          var plan = el.getAttribute("data-plan") || "Starter";
          var price = el.getAttribute("data-price") || "$25.00";
          localStorage.setItem(KEY_PLAN, plan);
          localStorage.setItem(KEY_PRICE, price);

          showToast("Plan selected: " + plan + " (" + price + ")");
          startPay(plan);
        },

        "submit-lead": function() {
          var emailEl = qs("#lead-email");
          var plan = localStorage.getItem(KEY_PLAN) || "";
          var email = (emailEl ? emailEl.value : "").trim();

          if (!plan) {
            showToast("Select a plan first.");
            return;
          }
          if (!email || email.indexOf("@") < 0) {
            showToast("Enter a valid email.");
            return;
          }

          var leads = readJson(KEY_LEADS, []);
          leads.push({
            email: email,
            plan: plan,
            at: new Date().toISOString()
          });
          writeJson(KEY_LEADS, leads);

          showToast("Lead captured. Proceeding to payment...");

          setTimeout(function() {
            closeModal("#modal-plans");
            startPay(plan);
          }, 800);
        },

        "check-payment": function() {
          checkPay();
        },

        "do-login": function() {
          var emailEl = qs("#login-email");
          var passEl = qs("#login-pass");
          var email = (emailEl ? emailEl.value : "").trim();
          var pass = (passEl ? passEl.value : "").trim();

          if (!email || email.indexOf("@") < 0) {
            showToast("Enter a valid email.");
            return;
          }
          if (!pass) {
            showToast("Enter a password.");
            return;
          }

          localStorage.setItem(KEY_AUTH, email);
          showToast("Signed in: " + email);
          closeModal("#modal-login");
        },

        "reset-demo": function() {
          localStorage.removeItem(KEY_LEADS);
          localStorage.removeItem(KEY_PLAN);
          localStorage.removeItem(KEY_AUTH);
          var leadPlan = qs("#lead-plan");
          var leadEmail = qs("#lead-email");
          if (leadPlan) leadPlan.value = "";
          if (leadEmail) leadEmail.value = "";
          showToast("Reset.");
        }
      };

      function handleClick(e) {
        var el = e.target;
        // ë²„íŠ¼ ì•ˆìª½ span í´ë¦­ ë“± ëŒ€ë¹„: data-action ê°€ì§„ ì¡°ìƒê¹Œì§€ íƒìƒ‰
        while (el && el !== document.body) {
          var act = el.getAttribute && el.getAttribute("data-action");
          if (act) {
            e.preventDefault();
            var fn = actions[act];
            if (fn) {
              fn(el);
            } else {
              showToast("Unknown action: " + act);
            }
            return;
          }
          el = el.parentNode;
        }
      }

      // ----- í•´ì‹œ ë¼ìš°íŒ…(ë‹¨ìˆœ) -----
      function onHashChange() {
        var h = location.hash || "";
        if (h && h.startsWith("#")) {
          // ëª¨ë‹¬ í•´ì‹œ ê°™ì€ ê±´ ì“°ì§€ ì•Šê³  ì„¹ì…˜ë§Œ ì²˜ë¦¬
          if (qs(h)) {
            scrollToTarget(h);
          }
        }
      }

      // ----- ì´ˆê¸° ë°”ì¸ë”© -----
      document.addEventListener("click", handleClick);
      window.addEventListener("hashchange", onHashChange);

      // ESCë¡œ ëª¨ë‹¬ ë‹«ê¸°
      document.addEventListener("keydown", function(e) {
        if (e.key === "Escape") {
          closeModal("#modal-login");
          closeModal("#modal-plans");
        }
      });

      // ë°±ë“œë¡­ í´ë¦­ ì‹œ ë‹«ê¸°
      qsa(".modal-backdrop").forEach(function(bd) {
        bd.addEventListener("click", function(e) {
          if (e.target === bd) {
            bd.style.display = "none";
          }
        });
      });

      // ì´ˆê¸° í•´ì‹œ ì²˜ë¦¬
      onHashChange();

      // showToast("JS loaded.");
    })();
  </script>




<!-- ======= PAYMENT WIDGET (injected) ======= -->
<div id="catp-pay" style="margin-top:14px;padding:14px;border:1px solid rgba(255,255,255,0.12);border-radius:14px;background:rgba(255,255,255,0.06);">
  <div style="font-weight:800;margin-bottom:8px;">Crypto Checkout (NOWPayments)</div>

  <div style="display:flex;flex-wrap:wrap;gap:10px;align-items:center;">
    <button id="catpPayBtn" style="cursor:pointer;border:none;border-radius:12px;padding:12px 14px;font-weight:800;background:linear-gradient(135deg,#7c5cff,#00d3a7);color:#0b1020;">
      ê²°ì œí•˜ê³  ë‹¤ìš´ë¡œë“œ ($25.00)
    </button>

    <button id="catpCheckBtn" style="cursor:pointer;border:1px solid rgba(255,255,255,0.16);border-radius:12px;padding:12px 14px;font-weight:800;background:rgba(255,255,255,0.10);color:#eaf0ff;">
      ê²°ì œ í™•ì¸
    </button>
  </div>
  
  <div id="catpPayDetails" style="display:none;margin-top:14px;padding:14px;background:rgba(0,0,0,0.3);border:1px solid rgba(255,255,255,0.1);border-radius:10px;font-size:13px;">
    <div style="margin-bottom:8px;color:#aaa;font-weight:bold;">ì•„ë˜ ì£¼ì†Œë¡œ ì •í™•í•œ ê¸ˆì•¡ì„ ì „ì†¡í•˜ì„¸ìš”:</div>
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
        <span style="color:#00d3a7;font-weight:bold;font-size:16px;" id="catpPayAmount">0.00</span>
        <span style="color:#fff;font-weight:bold;" id="catpPayCurrency">USDT</span>
    </div>
    <div style="background:#111;padding:10px;border-radius:6px;word-break:break-all;user-select:all;color:#eaf0ff;font-family:monospace;border:1px dashed #444;cursor:pointer;" 
         onclick="navigator.clipboard.writeText(this.textContent);alert('ì£¼ì†Œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');" 
         title="í´ë¦­í•˜ì—¬ ë³µì‚¬"
         id="catpPayAddress">Generating Address...</div>
    <div style="margin-top:8px;font-size:11px;color:#888;">* ì…ê¸ˆ í›„ ë¸”ë¡ì²´ì¸ ìŠ¹ì¸ê¹Œì§€ 1~5ë¶„ ì†Œìš”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>* ì´ í˜ì´ì§€ë¥¼ ë‹«ì§€ ë§ˆì„¸ìš”. ìë™ í™•ì¸ë©ë‹ˆë‹¤.</div>
  </div>

  <div id="catpStatus" style="margin-top:8px;font-size:14px;color:#aaa;"></div>
  <div id="catpDownloadArea" style="margin-top:8px;display:none;"></div>
</div>

<script>
(function(){
  var PRODUCT_ID = "20260219-160930-the-best-notion-templates-for";
  var PRICE_USD = 25.0;
  var orderId = "";

  // 1. API Base URL ê°ì§€
  // ë¡œì»¬ í”„ë¦¬ë·°/ëŒ€ì‹œë³´ë“œ(127.0.0.1/localhost)ì—ì„œëŠ” ë¡œì»¬ ê²°ì œ ì„œë²„ ì‚¬ìš©
  // ë°°í¬(Vercel ë“±)ì—ì„œëŠ” same-origin ìƒëŒ€ê²½ë¡œ(/api/...) ì‚¬ìš©
  var isLocal = (location.hostname === "127.0.0.1" || location.hostname === "localhost");
  var API_BASE = isLocal ? "http://127.0.0.1:5000" : "";

  function qs(id) { return document.getElementById(id); }
  function setStatus(msg) {
    var el = qs("catpStatus");
    if (el) el.textContent = msg;
  }
  function showDownload(url) {
    var area = qs("catpDownloadArea");
    if (!area) return;
    area.style.display = "block";
    area.innerHTML = '<a href="' + (isLocal ? API_BASE : "") + url + '" target="_blank" style="color:#00d3a7;font-weight:bold;text-decoration:underline;font-size:16px;">[ë‹¤ìš´ë¡œë“œ ë§í¬ í´ë¦­]</a>';
    
    // Hide payment details on success
    var details = qs("catpPayDetails");
    if (details) details.style.display = "none";
    
    // Hide buttons
    if(qs("catpPayBtn")) qs("catpPayBtn").style.display = "none";
  }

  // Expose to global for button clicks
  window.startCryptoPay = startCryptoPay;

  async function startCryptoPay(overridePrice) {
    var finalPrice = PRICE_USD;
    if (overridePrice) {
      // Parse "$19.90" -> 19.90
      var p = parseFloat(String(overridePrice).replace(/[^0-9.]/g, ""));
      if (!isNaN(p) && p > 0) finalPrice = p;
    }

    setStatus("ì£¼ë¬¸ ìƒì„± ì¤‘... ($" + finalPrice + ")");
    try {
      // Use GET to avoid 405 Method Not Allowed issues on some platforms
      var url = API_BASE + "/api/pay/start" + 
                "?product_id=" + encodeURIComponent(PRODUCT_ID) + 
                "&price_amount=" + encodeURIComponent(finalPrice);
      
      var res = await fetch(url, {
        method: "GET",
        headers: { "Accept": "application/json" }
      });

      var data = await res.json().catch(function(){ return {}; });
      if (!res.ok) {
        if (data.can_request) {
          alert(data.message || "ìƒí’ˆì´ ì¼ì‹œì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤. ì›Œë“œí”„ë ˆìŠ¤ ëŒ“ê¸€ë¡œ ìš”ì²­í•˜ì‹œë©´ ì¬ìƒì„±í•´ ë“œë¦½ë‹ˆë‹¤!");
          setStatus("ì¬ìƒì„± ìš”ì²­ í•„ìš” (ëŒ“ê¸€ë¡œ ë¬¸ì˜)");
        } else {
          setStatus("ì‹¤íŒ¨: " + (data.error || (res.status + " " + res.statusText)));
        }
        return;
      }

      orderId = data.order_id || "";
      
      // Update Payment Details UI
      if (data.payment_address) {
          var details = qs("catpPayDetails");
          if (details) {
              details.style.display = "block";
              if(qs("catpPayAmount")) qs("catpPayAmount").textContent = data.pay_amount;
              if(qs("catpPayCurrency")) qs("catpPayCurrency").textContent = data.pay_currency;
              if(qs("catpPayAddress")) qs("catpPayAddress").textContent = data.payment_address;
          }
          setStatus("ì…ê¸ˆ ëŒ€ê¸° ì¤‘... (" + data.pay_currency + ")");
      } else {
          setStatus("ì£¼ë¬¸ ìƒì„± ì™„ë£Œ (order_id=" + orderId + "). ê²°ì œ í™•ì¸ ì¤‘...");
      }

      // ì¦‰ì‹œ 1íšŒ check
      await checkPay(true);
    } catch (e) {
      setStatus("ì—ëŸ¬: " + (e && e.message ? e.message : String(e)));
    }
  }

  async function checkPay(auto) {
    if (!orderId) {
      setStatus("order_idê°€ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € 'ê²°ì œí•˜ê³  ë‹¤ìš´ë¡œë“œ'ë¥¼ ëˆ„ë¥´ì„¸ìš”.");
      return;
    }

    try {
      var url = API_BASE + "/api/pay/check?order_id=" + encodeURIComponent(orderId) + "&product_id=" + encodeURIComponent(PRODUCT_ID);
      var res = await fetch(url, { method: "GET" });
      var data = await res.json().catch(function(){ return {}; });
      if (!res.ok) {
        setStatus("ì‹¤íŒ¨: " + (data.error || (res.status + " " + res.statusText)));
        return;
      }

      if ((data.status || "") === "paid") {
        setStatus("ê²°ì œ ì™„ë£Œ âœ… ë‹¤ìš´ë¡œë“œ ì¤€ë¹„ë¨");
        if (data.download_url) {
          showDownload(data.download_url);
        } else {
          // ë°°í¬ í‘œì¤€: downloads ê²½ë¡œ
          showDownload("/downloads/" + PRODUCT_ID + ".zip");
        }
        return;
      }

      // If not paid
      if ((data.status || "") === "pending" || (data.status || "") === "waiting") {
          setStatus("ì…ê¸ˆ í™•ì¸ ì¤‘... (" + (data.provider_status || "waiting") + ")");
      } else {
          setStatus("ìƒíƒœ: " + (data.status || "unknown"));
      }

      if (auto) {
        // í´ë§(ìµœëŒ€ 60íšŒ * 3ì´ˆ = 3ë¶„)
        var tries = 0;
        var timer = setInterval(async function() {
          tries++;
          // Stop if element removed
          if (!qs("catpStatus")) { clearInterval(timer); return; }
          
          if (tries > 60) {
            clearInterval(timer);
            setStatus("ì‹œê°„ ì´ˆê³¼: ê²°ì œ ì™„ë£Œë¥¼ í™•ì¸í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ìˆ˜ë™ìœ¼ë¡œ 'ê²°ì œ í™•ì¸'ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.");
            return;
          }
          await checkPay(false);
        }, 3000);
      }
    } catch (e) {
      setStatus("ì—ëŸ¬: " + (e && e.message ? e.message : String(e)));
    }
  }

  var payBtn = qs("catpPayBtn");
  var chkBtn = qs("catpCheckBtn");
  if (payBtn) payBtn.addEventListener("click", function() { startCryptoPay(null); });
  if (chkBtn) chkBtn.addEventListener("click", function(){ checkPay(false); });

  // ë””ë²„ê·¸: API_BASE ë…¸ì¶œ
  try {
    var ph = document.getElementById("payment-widget-placeholder");
    if (ph) {
      ph.textContent = "payment_api_base=" + API_BASE + " (auto-detected)";
    }
  } catch (e) {}

})();
</script>
<!-- ======= END PAYMENT WIDGET ======= -->

</body>
</html>
